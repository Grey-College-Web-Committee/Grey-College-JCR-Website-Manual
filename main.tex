\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage[tmargin=1in,bmargin=1in,lmargin=1.25in,rmargin=1.25in]{geometry}
\usepackage{graphicx}
\usepackage{float}
\usepackage{parskip}
\renewcommand{\familydefault}{\sfdefault}
\usepackage{hyperref}
\hypersetup{
    colorlinks,
    citecolor=black,
    filecolor=black,
    linkcolor=black,
    urlcolor=black
}

\begin{document}

\begin{titlepage}
    \begin{center}
        \vspace*{1cm}
        \Huge
        \textbf{Grey JCR Website Manual}
        \\
        \vspace{1cm}
        \LARGE
        \textbf{March 2021}
        \vfill
        \includegraphics[width=0.4\textwidth]{logo512.png}
    \end{center}
\end{titlepage}

\newpage
\tableofcontents
\newpage

\section{Elections}
Last updated: 25/01/2021

To use the election system you will require the permission 'Manage Elections'. Anybody with this permission will be able to create, edit, delete, generate results, and see in-depth anonymous voting logs for each election. It is strongly advised that you manage elections on a computer using Google Chrome or Microsoft Edge (soon to also support Safari once the next update from Apple is live) rather than mobile for a more consistent experience To begin managing the elections you will need to login to the website and, if you have the correct permissions, you will see 'Admin Options' in the navigation bar. Hover over this to activate the drop-down and click 'Manage Elections'.
\subsection{Create a New Election}
From the main election management page, click the green button 'Create New Election' to open the separate page that allows you to create a new election. Initially the page will look like this:
\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth,height=\textheight,keepaspectratio]{elections/initial_create_screen.png}
    \caption{Election Creation: Add Details}
    \label{fig:election_creation_start}
\end{figure}
The initial steps are:
\begin{enumerate}
    \item Type the name of the election in the 'Election Name' text field
    \item Select a date and time for the release of the manifestos (Warning: If you are not using Chrome or Edge this may appears as blank text field like the election name field. You will need to type the date-time in the format yyyy-MM-dd hh:mm:ss)
    \item Select a date and time for when the voting will open. This must be after the manifesto release.
    \item Select a date and time for when the voting will close. This must be after the voting opens.
\end{enumerate}
Once you are happy with these details click 'Create Election'. You can edit these details later if necessary (see the next subsection). The screen will change slightly now. At the top you will find the confirmed details for the election you have created. Now you can begin adding candidates.
\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth,height=\textheight,keepaspectratio]{elections/add_candidate_screen.png}
    \caption{Election Creation: Add Candidates}
    \label{fig:election_add_candidate}
\end{figure}
\textbf{It is important to note that candidates and their manifestos cannot be edited once you leave this page!} (Note for Website Editor: Although if something urgently needs changing you can make these changes manually by editing the tables 'Elections' and 'ElectionCandidates'.)
\\[12pt]
To add a new candidate:
\begin{enumerate}
    \item Type their name in the 'Candidate Name' text field
    \item Then click the 'Choose File' button and select their manifesto
    \item Click 'Add Candidate'
\end{enumerate}
Repeat this process for each candidate. \textbf{The system does not automatically add RON, you will need to manually do this each time you make a new election} (this is intentional as the election system may be used for other votes such as referendums). Once you have added every candidate you can simply leave the page. Your changes are saved each time you add/remove a candidate automatically. 
\subsection{Edit an Election}
Once you have created an election you can then edit the name, manifesto release date, voting opening date and voting closing date. Any changes you make will be logged and you must type a reason as to why you have made such a change to ensure that elections are transparent. To access this page click the 'Edit' button on the row of the table representing the election you are interested in. Once you click this you will be taken to a separate page.
\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth,height=\textheight,keepaspectratio]{elections/election_edit.png}
    \caption{Election Edit Page}
    \label{fig:election_edit}
\end{figure}
On the left hand side is the fields that can be edited. The same conditions apply to the dates (manifestos release before voting opens which opens before voting closes). On the right hand side you can see the edit log.

At the bottom of the page is a 'Delete Election' button. This should only be used in extreme cases (e.g. needing to change candidates). Pressing the button will purge all of the related manifestos, candidates and votes for that election. When you do this the JCR President, FACSO, and Chair will receive an email notifying them that the election has been deleted as well as the name and username of the person who deleted it.
\subsection{Results}
\subsubsection{Generating the Results}
Once an election has concluded you will be able to generate the results from the management page. \textbf{Please note that once you generate the results you will no longer be able to edit the election. This includes extending the voting deadline.} (Note for Website Editor: If necessary, you can delete the contents in the fields 'winner', 'deepLog', 'roundSummaries' and 'published' fields in the 'Elections' table to allow changes to be made.) On the management page, the row related to the election will look like so:
\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth,height=\textheight,keepaspectratio]{elections/election_row_generate.png}
    \caption{Election row ready for result generation}
    \label{fig:election_generation_ready}
\end{figure}
Click either of the large green buttons 'Generate Results'. This will redirect you. It may take a little while to compute the results depending on the turnout for the vote. At the time of writing this we have not had a large scale test of the results generation but it should take less than a minute to produce the results for you. Once the results have been generated you will see a screen like this:
\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth,height=\textheight,keepaspectratio]{elections/election_results.png}
    \caption{Election results after generation}
    \label{fig:election_results_generated}
\end{figure}
\subsubsection{Interpreting the Results}
This will summarise all of the information about the election. The are a few potential cases that could arise:
\begin{itemize}
    \item {[Candidate Name]} achieves quota and is duly elected: This means the person was elected.
    \item No one achieves quota and [Candidate Name] is eliminated: The lowest votes candidate was eliminated and we move on to another round of voting.
    \item No one achieves quota and [Candidate Name] is eliminated by 2nd preference tiebreaker: There was multiple candidates with the lowest votes (more information below about tiebreakers and how they work).
    \item No one achieves quota and [Candidate Name] is eliminated by random draw (double tiebreaker): There were again multiple candidates with the lowest votes in the 1st tiebreaker (more information below about tiebreakers and how they work). 
    \item Nobody achieves quota, the result is a draw: All of the candidates tied on votes and there is no way to determine a winner.
\end{itemize}
It is rare to reach any of the states where a tiebreaker is needed. Nonetheless they are implemented in case they happen. 

The first tiebreaker works by looking at the next preferences of every voter who did not vote for a candidate in the tiebreaker. For each of these voters it takes their favoured candidate who is in the tiebreaker and tallies these votes. (e.g. nobody has won the round but candidates 1 and 4 are safe whereas candidates 2 and 3 are in the tiebreaker; a voter has voted in order of preference for [1, 4, 3, 2] so in the tiebreaker they cast a vote for candidate 3 whereas a voter who has voted in order of preference for [3, 1, 4, 2] will not cast a vote in the tiebreaker as their preferred candidate is in the tiebreaker)

The second tiebreaker may happen incredibly rarely. In this case one of the losers of the first tiebreaker (someone may be safe from this tiebreaker if they gathered enough votes in the first tiebreaker but not the initial round of voting) will be randomly eliminated. It is up to the JCR's discretion to determine what to do in this case (either accept the result, reroll using the note to the web editor above or perform a manual recount etc).

In the event of a complete tie it is again up to the JCR's discretion to determine what to do.
\subsubsection{Publishing the Results}
Once you have generated the results you can publish them on the website. This is simple to do but please be aware that once you have published them you cannot unpublish them without help from the Website Editor. (Note for Website Editor: Set the 'published' field in the 'Elections' table to 0)

To publish, all you have to do is click the button 'Publish' on the election row on the main management page:
\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth,height=\textheight,keepaspectratio]{elections/election_row_publish.png}
    \caption{Election results ready for publication}
    \label{fig:election_publication_ready}
\end{figure}
Just click the green 'Publish' button and the result will be viewable from the 'Elections' page that any JCR member can access. This only publishes who won and no information about the breakdown of the vote. 
\subsubsection{Revisit the Results}
You can easily return to the generated results from the main management page for the elections. Simply find the row and you'll see a blue button labelled 'View Results'. Click this to come back to the results (they won't be regenerated however, once the results are generated once they are saved for future use).
\subsubsection{Anonymous Voting Logs}
You can validate the results of the election from the results page by clicking on the green 'Load Round' button. It is strongly advised to only press one and read through it first as the log will be very long if many people have voted. It anonymises the voters and candidates but you can follow through easily.

\newpage
\section{Complaints}
Last Updated: 11/02/2021

To manage the complaints system you will require the permission 'View Complaints'. Anybody with this permission will be able to view any complaints that have been filed. To begin viewing the complaints you will need to login to the website and, if you have the correct permissions, you will see 'Admin Options' in the navigation bar. Hover over this to activate the drop-down and click 'Manage Complaints'.
\subsection{Creating a Complaint}
Any JCR member is able to create a complaint by clicking on 'Submit Complaint' in the footer of the website. They will be presented with a screen similar to the following:
\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth,height=\textheight,keepaspectratio]{complaints/complaints_form.png}
    \caption{The complaints form}
    \label{fig:complaints_form}
\end{figure}
The name of the person complaining (the complainant) and date of the complaint will be pre-filled. The date is not editable by the user but the name is. There are protections in place to prevent users from filling complaints anonymously (in line with the complaints procedure set out by the JCR) and to prevent users from filling malicious complaints while posing as a different person.

Every complaint must include:
\begin{itemize}
    \item A brief subject of the complaint
    \item The full details of the complaint
    \item A signature
    \item An acknowledgement that the complaint is true to the knowledge of the complainant
\end{itemize}
These are all covered by the website form and the user cannot file the complaint without filling in these details. 

Once the complaint has been filed, the complainant will receive an email to their Durham University email address confirming the details of the complaint so they can be referenced if the complaint is escalated (and it provides a transparent record of what we have stored). The JCR Chair will also be notified by email that a new complaint has been filed. The details of the complaint will not be in the email. Instead a link is provided to the admin page to view the complaint details securely.

\subsection{Viewing Complaints}
In the 'Manage Complaints' section (which is only visible to those who have correct permissions) a screen similar to this will be shown:
\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth,height=\textheight,keepaspectratio]{complaints/complaints_overview.png}
    \caption{Complaints Overview}
    \label{fig:complaints_overview}
\end{figure}
This provides a brief overview of each of the complaints that have been filed. The 'From' column will provide the name that they have provided in the form as well as the name that is associated with their user account. You should verify these are similar manually as the system does not check that these are similar. To find out more about a complaint click the blue 'View Complaint' button on the row corresponding to the complaint. 

Once you have clicked on the details of a complaint you will be presented with a screen similar to this:
\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth,height=\textheight,keepaspectratio]{complaints/complaints_single.png}
    \caption{A single complaint}
    \label{fig:complaints_single}
\end{figure}
All of the details of the complaint will be shown. This includes:
\begin{itemize}
    \item The name given by the complainant
    \item The real name already associated with the user account of the complainant
    \item The Durham University email address of the complainant
    \item The signature of the complainant
    \item Who the complaint is about 
    \item The date and time when the complaint was submitted
    \item The subject of the complaint
    \item The full text relating to the complaint
\end{itemize}

\newpage
\section{Careers}
Last Updated: 12/02/2021

To manage the careers system you will require the permission 'Manage Careers'. Anybody with this permission will be able to create and edit posts. To begin creating posts you will need to login to the website and, if you have the correct permissions, you will see 'Admin Options' in the navigation bar. Hover over this to activate the drop-down and click 'Manage Careers'

\subsection{View Posts}
Any JCR member will be able to see the posts that are published on the website by navigating to the careers page via the navigation bar. The screen will look similar to this:
\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth,height=\textheight,keepaspectratio]{careers/careers_view.png}
    \caption{Careers Page}
    \label{fig:careers_view}
\end{figure}
The page will show the 5 most recent postings but all other posts can be accessed using the page feature by clicking the green '←' and '→' buttons. At the bottom of every post there will be a hyperlink to allow anybody to email the Careers and Alumni officer directly. Clicking this will open the user's default mail service and preset the recipient and subject. 

The 'Edit Post' button is only present for users with the 'Manage Careers' permission. 

\subsection{Create a Post}
Once you have clicked the 'Manage Careers' button you will be able to create a new post that will be automatically published on the website. The screen will look similar to this:
\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth,height=\textheight,keepaspectratio]{careers/careers_new_post.png}
    \caption{Create a new careers post}
    \label{fig:careers_new_post}
\end{figure}
You must fill in all of the fields to be able to create the post. The post title and post contents will be published on the website along with a link to send an email to the Careers and Alumni Officer's email. This link will preset the subject of the email to the value you have set in the 'Automatic Email Subject' box. Once you have filled in all of the fields the 'Create Post' button will automatically unlock. Click this button to submit the post.

\subsection{Editing and Deleting Posts}
From the page where you can view the posts you will also be able to open a page to edit the posts. If you have the correct permission then you will see a blue 'Edit Post' button (see figure \ref{fig:careers_view}). Clicking this will present a screen similar to this: (but the information that is filled out will correspond to the post)
\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth,height=\textheight,keepaspectratio]{careers/careers_edit.png}
    \caption{Create a new careers post}
    \label{fig:careers_edit}
\end{figure}
On this page you will be able to edit all of the same fields as in the create post page. When you make a change to any of the fields the green button at the bottom will unlock allowing you to update the post.

The red button at the top of the page 'Permanently Delete Post' will remove the post. If you click this a prompt will appear asking you to confirm that you want to delete the post.

\subsection{External Links}
You can put external links in the body of the careers post. It is important that these links are appropriate as they can be seen by all JCR members! The syntax for adding a link is as follows:
\newline
\newline
\textbf{[Text to display goes here](URL to link to goes here)}
\newline
\newline
The URL must start with https:// otherwise it will be intentionally ignored.

\newpage
\section{Events}
Last Updated: 05/03/2021

To manage the events system you will require the permission 'Manage Events'. Anybody with this permission will be able to create events, edit events, make groups, override payments, and see all of the details about attendees of an event. There is also an additional permission 'Export Events' that will allow users to export the data to a CSV file. To begin managing events you will need to login to the website and, if you have the correct permissions, you will see 'Admin Options' in the navigation bar. Hover over this to activate the drop-down and click 'Manage Events'. (There will be an option for 'Export Events' if you have the other permission as well)

\subsection{Create an Event}
\subsubsection{Details}
\subsubsection{Images}
\subsubsection{Ticket Types}
\subsection{Edit an Event}
\subsection{Manage Bookings}
\subsection{Override Payments}
\subsection{Invite Only Events}
\subsection{Create Bookings}

\newpage
\section{Debts}
\subsection{Manage Debts}

\end{document}
